# 题目数据属性说明文档

本文档详细说明各题型数据对象中各个属性的作用和角色，用于改进智能纠错功能。

## 属性分类

根据功能，属性可分为以下几大类：

---

## 一、题目标识类属性

### 1. `id` (题目记录ID)
- **作用**：题目记录的唯一标识符（题目实例ID）
- **类型**：String
- **示例**：`"863e0646ac914b718ea470f41b6a6ff2"`
- **用途**：
  - 后端纠错时用于唯一标识一道题目
  - 前端填充答案时用于定位DOM元素
  - 答案尝试缓存的key值

### 2. `questionId` (题目库ID)
- **作用**：题目库中题目的唯一标识符（题目模板ID）
- **类型**：String
- **示例**：`"15e1e0a0e71d4fb69784a2f6586c19ee"`
- **用途**：
  - 用于查找同一题目的不同实例
  - 题目库管理和去重
  - AI答题时用于精确匹配

### 3. `question_id`
- **作用**：题目ID的别名（通常为null）
- **类型**：String | null
- **用途**：兼容性字段

---

## 二、题目内容类属性

### 4. `questionContent` (题目内容HTML)
- **作用**：题目的HTML格式内容（包含输入框等标签）
- **类型**：String
- **示例**：`"下列选项中，Spring Security 默认使用的加密算法是（）。"`
- **用途**：
  - 显示题目内容
  - AI答题时作为输入
  - 答案库搜索的关键字段

### 5. `questionContentText` (题目纯文本)
- **作用**：题目的纯文本内容（去除HTML标签）
- **类型**：String
- **示例**：`"下列选项中，Spring Security 默认使用的加密算法是（）。"`
- **用途**：
  - 文本匹配和搜索
  - AI答题时更干净的输入
  - 显示时去除HTML标签

### 6. `questionContentXml`
- **作用**：题目的XML格式内容（通常为null）
- **类型**：String | null
- **用途**：历史兼容字段

---

## 三、题目类型类属性

### 7. `questionType` (题目类型)
- **作用**：题目的类型标识
- **类型**：String
- **取值**：
  - `"0"` - 单选题
  - `"1"` - 多选题
  - `"2"` - 判断题
  - `"3"` - 填空题
  - `"4"` - 简答题
  - `"5"` - 编程题（推测）
- **用途**：
  - 决定答题方式和纠错策略
  - 前端渲染不同类型的题目
  - 后端判断如何提取正确答案

### 8. `type`
- **作用**：题目类型的别名（通常在API请求中使用）
- **类型**：String
- **用途**：API接口兼容性字段

---

## 四、选项类属性

### 9. `questionOptionList` (选项列表)
- **作用**：题目的选项列表（结构化数据）
- **类型**：Array<Object>
- **结构**：
  ```json
  {
    "text": "A、选项内容",
    "isSelcted": true/false,  // 学生是否选择了该选项
    "isTrue": true/false      // 该选项是否为正确答案
  }
  ```
- **用途**：
  - **提取正确答案**：通过 `isTrue: true` 的选项判断正确答案
  - 前端渲染选项
  - 智能纠错时获取所有选项

### 10. `options` (选项JSON字符串)
- **作用**：选项的JSON字符串格式（纯选项文本，不包含A、B、C、D前缀）
- **类型**：String
- **示例**：`"[\"BCryptPasswordEncoder\",\"Pbkdf2PasswordEncoder\",...]"`
- **用途**：
  - 存储选项文本
  - 答案库匹配
  - API请求时传递选项

### 11. `optionsList`
- **作用**：选项列表的别名（通常为null）
- **类型**：Array | null
- **用途**：兼容性字段

### 12. `optionsListXml`
- **作用**：选项的XML格式（通常为null）
- **类型**：String | null
- **用途**：历史兼容字段

### 13. `optionsPicture` / `optionsPictureList`
- **作用**：选项中的图片信息
- **类型**：String | Array | null
- **用途**：图片类题目的选项处理

---

## 五、答案类属性

### 14. `stuAnswer` (学生答案)
- **作用**：学生提交的答案
- **类型**：String
- **示例**：
  - 单选题：`"A"`
  - 多选题：`"A,B"` 或 `"A"`
  - 判断题：`"对"` 或 `"错"`
  - 填空题：`"【csrf()】"`（包含占位符）
  - 简答题：长文本
- **用途**：
  - **核心字段**：判断学生答案是否正确
  - 前端Vue数据绑定（`vueInstance.stuAnswer`）
  - 纠错时记录已尝试的答案

### 15. `answer` (正确答案)
- **作用**：题目的正确答案
- **类型**：String
- **示例**：`""`（通常为空，需要通过 `questionOptionList` 提取）
- **用途**：
  - 存储标准答案
  - 作为备选方案提取正确答案

### 16. `answerText` / `answersXml` / `answersStuXml`
- **作用**：答案的文本或XML格式（通常为null）
- **类型**：String | null
- **用途**：历史兼容字段

### 17. `answerStemList`
- **作用**：答案段落列表（通常为null）
- **类型**：Array | null
- **用途**：复杂题型的答案结构

### 18. `answerSerialArr`
- **作用**：答案序列数组（通常为null）
- **类型**：Array | null
- **用途**：有序答案的处理

### 19. `answerOriginal` / `stuAns` / `stuAnsOriginal`
- **作用**：原始答案的备份（通常为null）
- **类型**：String | null
- **用途**：答案修改历史追踪

---

## 六、批改结果类属性

### 20. `correct` (是否正确)
- **作用**：**关键字段** - 判断学生答案是否正确
- **类型**：Boolean
- **取值**：
  - `true` - 答对了
  - `false` - 答错了
- **用途**：
  - **智能纠错的核心判断**：只有 `correct: false` 的题目才需要纠错
  - 统计正确率
  - 前端显示对错标记

### 21. `stuScore` (学生得分)
- **作用**：学生该题的得分
- **类型**：Number
- **示例**：`2.0`（满分时）或 `0`（答错时）
- **用途**：
  - 计算总分
  - 判断是否得分

### 22. `score` (题目满分)
- **作用**：该题目的满分
- **类型**：Number
- **示例**：`2.0`
- **用途**：
  - 计算得分率
  - 显示题目分值

### 23. `systemScore`
- **作用**：系统评分（通常为null）
- **类型**：Number | null
- **用途**：自动评分系统使用

### 24. `systemCorrect`
- **作用**：系统自动判断结果（通常为null）
- **类型**：Boolean | null
- **用途**：自动批改系统使用

---

## 七、答题状态类属性

### 25. `isAnswer` (是否已答题)
- **作用**：标记是否已提交答案
- **类型**：Boolean
- **示例**：`true`
- **用途**：
  - 判断题目是否已作答
  - 统计答题进度

### 26. `isSelcted` (选项是否被选中)
- **作用**：选项是否被学生选中（在 `questionOptionList` 中）
- **类型**：Boolean
- **用途**：
  - 渲染选中状态
  - 多选题的答案收集

---

## 八、代码类属性（编程题专用）

### 27. `codeList`
- **作用**：代码列表（编程题用）
- **类型**：Array | null
- **用途**：编程题的代码内容

### 28. `testcaseList`
- **作用**：测试用例列表
- **类型**：Array | null
- **用途**：编程题的测试用例

### 29. `keywordcaseList`
- **作用**：关键词用例列表
- **类型**：Array | null
- **用途**：编程题的关键词匹配

### 30. `modelCode`
- **作用**：模板代码
- **类型**：String | null
- **用途**：编程题的代码模板

### 31. `stuout`
- **作用**：学生代码的输出
- **类型**：String | null
- **用途**：编程题的执行结果

### 32. `codeGroupId` / `caseGroupId`
- **作用**：代码组ID和用例组ID
- **类型**：String | null
- **用途**：编程题的分组管理

---

## 九、解析和附件类属性

### 33. `solution` (解析)
- **作用**：题目的解析内容
- **类型**：String
- **示例**：`""`（通常为空）
- **用途**：
  - 显示题目解析
  - AI生成答案时的参考

### 34. `solutionXml` / `solutionStemList`
- **作用**：解析的XML格式或段落列表
- **类型**：String | Array | null
- **用途**：复杂解析内容的存储

### 35. `attachmentList`
- **作用**：附件列表
- **类型**：Array | null
- **用途**：题目的附件文件

### 36. `qcStemList`
- **作用**：题目段落列表
- **类型**：Array | null
- **用途**：复杂题目的段落结构

---

## 十、分类和元数据类属性

### 37. `courseId` (课程ID)
- **作用**：题目所属的课程ID
- **类型**：String | null
- **用途**：课程分类和管理

### 38. `pointIds` / `pointList` / `pointArr`
- **作用**：知识点ID列表
- **类型**：String | Array | null
- **用途**：
  - 知识点分类
  - 题目检索

### 39. `difficulty` (难度)
- **作用**：题目难度等级
- **类型**：String | Number | null
- **用途**：难度分析和筛选

### 40. `sn` (序号)
- **作用**：题目在试卷中的序号
- **类型**：Number
- **示例**：`0`
- **用途**：题目排序

### 41. `questionNo` / `questionNum`
- **作用**：题号
- **类型**：String | Number | null
- **用途**：题目编号显示

---

## 十一、其他元数据属性

### 42. `createPerson` / `createTime` / `active`
- **作用**：创建人、创建时间、是否激活
- **类型**：String | Number | Boolean | null
- **用途**：数据管理

### 43. `studentOncodingAnswerList`
- **作用**：学生在线编码答案列表（编程题用）
- **类型**：Array | null
- **用途**：编程题的答案提交

### 44. `confidence`
- **作用**：置信度（AI评分用）
- **类型**：Number | null
- **用途**：AI自动评分的置信度

### 45. `lang` / `langName`
- **作用**：编程语言
- **类型**：String | null
- **用途**：编程题的编程语言标识

### 46. `ask` / `ask_file_name`
- **作用**：题目要求文件和文件名
- **类型**：String | null
- **用途**：编程题的特殊要求

---

## 核心属性总结

### 智能纠错最关键的属性：

1. **`correct`** - 判断是否需要纠错
2. **`questionType`** - 决定纠错策略
3. **`stuAnswer`** - 记录学生答案
4. **`questionOptionList`** - 提取正确答案和所有选项
5. **`id`** - 唯一标识题目实例
6. **`questionContent`** - 题目内容（用于AI答题）

### 属性在纠错流程中的作用：

```
1. 识别错题：correct === false
2. 确定题型：questionType (0/1/2/3/4)
3. 提取正确答案：questionOptionList 中 isTrue: true 的选项
4. 获取学生答案：stuAnswer
5. 记录尝试历史：使用 id 作为缓存key，stuAnswer 作为已尝试值
6. 计算下一个答案：根据 questionType 和已尝试答案计算
```

---

## 不同题型的特殊属性

### 单选题 (questionType: "0")
- 关键属性：`questionOptionList`, `stuAnswer` (单个字母)
- 纠错策略：按选项顺序尝试，最多尝试 n-1 次

### 多选题 (questionType: "1")
- 关键属性：`questionOptionList` (可能有多个 `isTrue: true`)
- 纠错策略：复杂，需要组合尝试

### 判断题 (questionType: "2")
- 关键属性：`stuAnswer` ("对"/"错")
- 纠错策略：只需尝试一次即可确定正确答案

### 填空题 (questionType: "3")
- 关键属性：`stuAnswer` (包含占位符如 `【xxx】`)
- 纠错策略：直接使用正确答案

### 简答题 (questionType: "4")
- 关键属性：`questionContent`, `stuAnswer` (长文本)
- 纠错策略：使用AI生成完整答案

---

## 注意事项

1. **字段值可能为 null**：很多字段在不需要时可能为 null，代码需要做好空值判断
2. **字段命名不一致**：存在 `questionId` 和 `question_id` 等多个命名变体
3. **答案提取优先级**：
   - 优先：`questionOptionList` 中 `isTrue: true` 的选项
   - 备选：`answer` 字段
   - 最后：通过其他方式推断
4. **HTML内容**：`questionContent` 可能包含HTML标签，需要解析
5. **学生答案格式**：不同题型的 `stuAnswer` 格式不同，需要区分处理

