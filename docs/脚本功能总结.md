# 脚本功能总结

## update_answer_bank.py - 答案库更新脚本

### 函数列表

| 函数名 | 功能描述 |
|--------|---------|
| `load_json_file` | 加载JSON文件，处理文件不存在和解析错误 |
| `get_opposite_judgment_answer` | 获取判断题的相反答案（对↔错转换） |
| `extract_correct_answer_from_question` | 从题目中提取正确答案，支持答对题目和判断题答错的情况 |
| `format_answer_for_output` | 格式化答案输出，多选题转换为逗号分隔格式 |
| `extract_options_from_question` | 从题目中提取选项列表（仅文本），支持多种格式 |
| `create_answer_entry` | 创建答案库条目（增强版答题记录格式），包含题目、答案、选项等信息 |
| `process_answered_questions` | 处理已答题的题目，提取正确答案并创建答案库条目，统计答对/答错数量 |
| `main` | 主函数，协调整个答案库更新流程：加载文件、提取答案、去重、保存 |

---

## search_answer.py - 答案库搜索脚本

### 函数列表

| 函数名 | 功能描述 |
|--------|---------|
| `load_answer_bank` | 加载答案库JSON文件，处理文件不存在和解析错误 |
| `search_by_content` | 按题目内容搜索（模糊匹配），支持大小写敏感选项 |
| `search_by_id` | 按题目ID搜索（精确匹配），支持id和questionId字段 |
| `search_by_options` | 按选项内容搜索，在选择题的options字段中搜索关键词 |
| `filter_by_type` | 按题目类型筛选，根据type字段过滤题目 |
| `search_combined` | 组合搜索：支持多种搜索条件组合，优先级：ID > 关键词 > 类型 |
| `format_answer_display` | 格式化题目显示，包含类型、ID、题目、选项、答案、解析等信息 |
| `print_results` | 打印搜索结果，支持限制显示数量 |
| `interactive_search` | 交互式搜索，提供友好的命令行交互界面 |
| `main` | 主函数，支持命令行模式和交互式模式 |

---

## 脚本功能概述

### update_answer_bank.py
- **主要功能**：从已答题题库中提取正确答案，生成增强版答案库
- **特殊处理**：判断题答错时自动提取正确答案（对↔错转换）
- **输出文件**：`answer.json`（自动备份原文件）

### search_answer.py
- **主要功能**：实现答案库的多种搜索方式
- **搜索方式**：题目内容、题目ID、选项内容、题目类型
- **使用模式**：支持命令行模式和交互式模式

