# ========================================
# 懒羊羊后端 - PostgreSQL生产环境配置
# ========================================

# 服务配置
APP_NAME="懒羊羊题库API"
APP_VERSION="1.0.0"
DEBUG=false
PORT=8000

# 数据库 - PostgreSQL（生产环境推荐）
# 格式: postgresql+asyncpg://用户名:密码@主机:端口/数据库名
DATABASE_URL=postgresql+asyncpg://lazy_user:your_password@localhost:5432/lazy_sheep

# Redis（可选，提升性能）
REDIS_URL=redis://localhost:6379/0
REDIS_ENABLED=true

# DeepSeek AI（必须配置）
DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL=deepseek-chat

# API认证
API_KEY_REQUIRED=true
# 管理员Key（请设置强密钥）
# 生成命令: python3 -c "import secrets; print('sk-' + secrets.token_urlsafe(32))"
ADMIN_API_KEY=your-admin-api-key-here

# 限流
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_DAY=1000

# 日志
LOG_LEVEL=INFO
LOG_FILE=./data/app.log

# ========================================
# PostgreSQL配置说明
# ========================================
# 
# 1. 安装PostgreSQL 16或17:
#    sudo apt install postgresql-16 postgresql-contrib-16
#
# 2. 创建数据库和用户:
#    sudo -u postgres psql
#    CREATE DATABASE lazy_sheep;
#    CREATE USER lazy_user WITH PASSWORD 'your_password';
#    GRANT ALL PRIVILEGES ON DATABASE lazy_sheep TO lazy_user;
#    \q
#
# 3. 修改上面的DATABASE_URL中的密码
#
# 4. 配置PostgreSQL认证（推荐SCRAM-SHA-256）:
#    sudo vim /etc/postgresql/16/main/pg_hba.conf
#    host    all    all    127.0.0.1/32    scram-sha-256
#
# 5. 重启PostgreSQL:
#    sudo systemctl restart postgresql
