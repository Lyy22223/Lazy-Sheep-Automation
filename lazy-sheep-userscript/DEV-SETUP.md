# å¼€å‘ç¯å¢ƒè‡ªåŠ¨æ›´æ–°é…ç½®

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šä½¿ç”¨æœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨ï¼ˆæ¨èï¼‰

#### 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# åœ¨ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«è¿è¡Œï¼š

# ç»ˆç«¯1ï¼šå¯åŠ¨ webpack watch æ¨¡å¼
npm run dev

# ç»ˆç«¯2ï¼šå¯åŠ¨æœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨
npm run serve

# æˆ–è€…ä½¿ç”¨ä¸€æ¡å‘½ä»¤åŒæ—¶å¯åŠ¨ï¼ˆéœ€è¦å…ˆå®‰è£… concurrentlyï¼‰
npm install -D concurrently
npm run dev:serve
```

#### 2. é…ç½®æ²¹çŒ´è„šæœ¬

1. æ‰“å¼€æ²¹çŒ´ç®¡ç†é¢æ¿
2. ç‚¹å‡»è„šæœ¬å³ä¾§çš„"ç¼–è¾‘"å›¾æ ‡
3. ç¡®è®¤è„šæœ¬å¤´éƒ¨æœ‰ä»¥ä¸‹é…ç½®ï¼š

```javascript
// @updateURL    http://localhost:8888/lazy-sheep-auto-answer.dev.user.js
// @downloadURL  http://localhost:8888/lazy-sheep-auto-answer.dev.user.js
```

#### 3. å¯ç”¨è‡ªåŠ¨æ›´æ–°

åœ¨æ²¹çŒ´è®¾ç½®ä¸­ï¼š
- âœ… å¯ç”¨"è‡ªåŠ¨æ›´æ–°æ£€æŸ¥"
- è®¾ç½®æ›´æ–°é—´éš”ï¼šç«‹å³ï¼ˆæˆ–æœ€çŸ­æ—¶é—´ï¼‰

#### 4. æ‰‹åŠ¨è§¦å‘æ›´æ–°

æ¯æ¬¡ä¿®æ”¹ä»£ç åï¼š
1. Webpack è‡ªåŠ¨é‡æ–°ç¼–è¯‘ (watchæ¨¡å¼)
2. ç­‰å¾… 1-2 ç§’
3. ç‚¹å‡»æ²¹çŒ´å›¾æ ‡ â†’ "æ£€æŸ¥è„šæœ¬æ›´æ–°"
4. åˆ·æ–°é¡µé¢ (`Ctrl + Shift + R`)

---

### æ–¹æ³•2ï¼šä½¿ç”¨æ²¹çŒ´çš„æ–‡ä»¶è®¿é—®æƒé™

#### 1. å¯ç”¨æ²¹çŒ´æ–‡ä»¶è®¿é—®

1. æ‰“å¼€ Chrome æ‰©å±•ç®¡ç†ï¼š`chrome://extensions/`
2. æ‰¾åˆ° Tampermonkey
3. ç‚¹å‡»"è¯¦ç»†ä¿¡æ¯"
4. å¯ç”¨"å…è®¸è®¿é—®æ–‡ä»¶ç½‘å€"

#### 2. ä½¿ç”¨ `@require` å¼•ç”¨æœ¬åœ°æ–‡ä»¶

åœ¨è„šæœ¬ä¸­æ·»åŠ ï¼š

```javascript
// ==UserScript==
// @name         æ‡’ç¾Šç¾Šè‡ªåŠ¨åŒ–å¹³å° - å¼€å‘ç‰ˆ
// @require      file://E:/Dev/czbk/czbk-refactor/dist/lazy-sheep-auto-answer.dev.user.js
// ==/UserScript==

console.log('å¼€å‘ç‰ˆæœ¬å·²åŠ è½½');
```

**æ³¨æ„ï¼š**
- Windows è·¯å¾„ä½¿ç”¨ `file:///E:/path/to/file`
- éœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„
- æ¯æ¬¡ä¿®æ”¹éœ€è¦ç¦ç”¨å†å¯ç”¨è„šæœ¬

---

### æ–¹æ³•3ï¼šä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨ + æµè§ˆå™¨æ‰©å±•

#### 1. å®‰è£… Live Server (VS Code)

1. åœ¨ VS Code ä¸­å®‰è£… "Live Server" æ‰©å±•
2. å³é”®ç‚¹å‡» `dist/` æ–‡ä»¶å¤¹
3. é€‰æ‹© "Open with Live Server"
4. é»˜è®¤ç«¯å£ï¼š5500

#### 2. æ›´æ–° userscript å…ƒæ•°æ®

```javascript
// @updateURL    http://127.0.0.1:5500/lazy-sheep-auto-answer.dev.user.js
// @downloadURL  http://127.0.0.1:5500/lazy-sheep-auto-answer.dev.user.js
```

---

## ğŸ“ å®Œæ•´å¼€å‘æµç¨‹

### 1. åˆå§‹è®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
cd e:\Dev\czbk\czbk-refactor

# å®‰è£…ä¾èµ–
npm install

# å®‰è£… concurrentlyï¼ˆç”¨äºåŒæ—¶è¿è¡Œå¤šä¸ªå‘½ä»¤ï¼‰
npm install -D concurrently
```

### 2. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# åŒæ—¶å¯åŠ¨ webpack watch å’Œ æœ¬åœ°æœåŠ¡å™¨
npm run dev:serve
```

ä½ ä¼šçœ‹åˆ°ï¼š
```
ğŸš€ æœ¬åœ°å¼€å‘æœåŠ¡å™¨å·²å¯åŠ¨: http://localhost:8888
ğŸ“ è„šæœ¬åœ°å€: http://localhost:8888/lazy-sheep-auto-answer.dev.user.js
```

### 3. é¦–æ¬¡å®‰è£…è„šæœ¬

1. è®¿é—®ï¼š`http://localhost:8888/lazy-sheep-auto-answer.dev.user.js`
2. æ²¹çŒ´ä¼šæç¤ºå®‰è£…ï¼Œç‚¹å‡»"å®‰è£…"
3. åˆ·æ–°ç­”é¢˜é¡µé¢æµ‹è¯•

### 4. æ—¥å¸¸å¼€å‘

1. ä¿®æ”¹ `src/` ä¸‹çš„ä»£ç 
2. Webpack è‡ªåŠ¨é‡æ–°ç¼–è¯‘ï¼ˆwatchæ¨¡å¼ï¼‰
3. ç­‰å¾…å‡ ç§’
4. åœ¨æ²¹çŒ´èœå•ç‚¹å‡»"æ£€æŸ¥è„šæœ¬æ›´æ–°"
5. åˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœ

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ²¹çŒ´ä¸è‡ªåŠ¨æ›´æ–°

**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥æœ¬åœ°æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆè®¿é—® `http://localhost:8888`ï¼‰
- ç¡®è®¤æ²¹çŒ´è®¾ç½®ä¸­å¯ç”¨äº†"è‡ªåŠ¨æ›´æ–°æ£€æŸ¥"
- æ‰‹åŠ¨ç‚¹å‡»"æ£€æŸ¥è„šæœ¬æ›´æ–°"
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯

### é—®é¢˜2ï¼šä¿®æ”¹ä»£ç åæ²¡æœ‰æ•ˆæœ

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç¡®è®¤ webpack å·²é‡æ–°ç¼–è¯‘ï¼ˆæŸ¥çœ‹ç»ˆç«¯è¾“å‡ºï¼‰
2. ç¡®è®¤æ²¹çŒ´å·²æ›´æ–°è„šæœ¬ï¼ˆæŸ¥çœ‹è„šæœ¬ç‰ˆæœ¬å·ï¼‰
3. ä½¿ç”¨ç¡¬åˆ·æ–°ï¼š`Ctrl + Shift + R`
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### é—®é¢˜3ï¼šCORS é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
- ç¡®è®¤ `serve-local.js` ä¸­è®¾ç½®äº† CORS å¤´
- æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº† localhost:8888

### é—®é¢˜4ï¼šæ–‡ä»¶è®¿é—®æƒé™é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
- Chrome: åœ¨æ‰©å±•è¯¦æƒ…ä¸­å¯ç”¨"å…è®¸è®¿é—®æ–‡ä»¶ç½‘å€"
- Edge: åŒä¸Š
- Firefox: éœ€è¦åœ¨ `about:config` ä¸­é…ç½®

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬ç®¡ç†

æ¯æ¬¡å‘å¸ƒå‰æ›´æ–°ç‰ˆæœ¬å·ï¼š
```javascript
// config/userscript-header.js
// @version      2.0.0-alpha.4  // é€’å¢ç‰ˆæœ¬å·
```

### 2. æ—¥å¿—è°ƒè¯•

ä½¿ç”¨è‡ªå®šä¹‰ logger è€Œä¸æ˜¯ console.logï¼š
```javascript
import { logger } from './core/utils.js';

logger.info('[åŠŸèƒ½] ä¿¡æ¯æ—¥å¿—');
logger.debug('[åŠŸèƒ½] è°ƒè¯•æ—¥å¿—');
logger.error('[åŠŸèƒ½] é”™è¯¯æ—¥å¿—');
```

### 3. çƒ­é‡è½½æŠ€å·§

å¦‚æœä¿®æ”¹çš„æ˜¯ Vue ç»„ä»¶ï¼Œå¯èƒ½éœ€è¦ï¼š
1. ç¦ç”¨è„šæœ¬
2. åˆ·æ–°é¡µé¢
3. å¯ç”¨è„šæœ¬
4. å†æ¬¡åˆ·æ–°é¡µé¢

### 4. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `npm run dev` (ä¸ä½¿ç”¨ serve) å¦‚æœåªæƒ³æ‰‹åŠ¨å¤åˆ¶ç²˜è´´
- å¼€å‘æ—¶å…³é—­ webpack-obfuscatorï¼ˆå·²åœ¨ dev æ¨¡å¼è‡ªåŠ¨å…³é—­ï¼‰
- ä½¿ç”¨ Chrome DevTools çš„æ€§èƒ½åˆ†æå·¥å…·

---

## ğŸ¯ æ¨èå·¥ä½œæµ

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
npm run dev:serve

# 2. é¦–æ¬¡å®‰è£…è„šæœ¬
# è®¿é—®ï¼šhttp://localhost:8888/lazy-sheep-auto-answer.dev.user.js

# 3. å¼€å‘å¾ªç¯
#    - ä¿®æ”¹ä»£ç 
#    - æŸ¥çœ‹ webpack ç¼–è¯‘è¾“å‡º
#    - æ²¹çŒ´æ£€æŸ¥æ›´æ–°
#    - åˆ·æ–°é¡µé¢æµ‹è¯•

# 4. æäº¤å‰æµ‹è¯•
npm run build
# æµ‹è¯•ç”Ÿäº§ç‰ˆæœ¬
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Tampermonkey æ–‡æ¡£](https://www.tampermonkey.net/documentation.php)
- [Webpack Watch æ¨¡å¼](https://webpack.js.org/configuration/watch/)
- [Userscript å…ƒæ•°æ®](https://wiki.greasespot.net/Metadata_Block)
